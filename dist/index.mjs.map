{"version":3,"sources":["../src/hooks/useAnimation.ts","../src/components/Animate.tsx"],"names":["DEFAULTS","useAnimation","config","type","duration","delay","easing","distance","degrees","scale","opacity","axis","opacityStart","opacityEnd","key","setKey","useState","elementRef","useRef","getAnimationClass","useCallback","effectiveDistance","useEffect","element","animationClass","classesToRemove","cls","validateTime","validateOpacity","distanceValue","degreesValue","scaleValue","replay","prevKey","value","defaultValue","numValue","Animate","forwardRef","children","Component","className","onAnimationComplete","props","forwardedRef","animationConfig","ref","setRefs","handleAnimationEnd","e","combinedClassName","React"],"mappings":"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","file":"index.mjs","sourcesContent":["\"use client\";\n\nimport { AnimationConfig, SlideAxis } from \"@/types/index\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\n\nexport interface UseAnimationReturn<T extends HTMLElement> {\n  ref: React.RefObject<T | null>;\n  key: number; // Key to force re-render and replay animation\n  replay: () => void; // Function to manually replay the animation\n}\n\nconst DEFAULTS = {\n  duration: 0.5,\n  delay: 0,\n  easing: \"ease-out\",\n  opacityStart: 0,\n  opacityEnd: 1,\n  distance: 50,\n  degrees: 360,\n  scale: 0.8,\n  ax: \"x\" as SlideAxis, // Default axis for slide animations\n};\n\n/**\n * Custom hook to apply CSS animations based on configuration.\n * Returns a ref to attach to the target element, a key for re-renders, and a replay function.\n */\nexport function useAnimation<T extends HTMLElement>(\n  config: AnimationConfig\n): UseAnimationReturn<T> {\n  const {\n    type,\n    duration = DEFAULTS.duration,\n    delay = DEFAULTS.delay,\n    easing = DEFAULTS.easing,\n    distance = DEFAULTS.distance,\n    degrees = DEFAULTS.degrees,\n    scale = DEFAULTS.scale,\n    opacity = {\n      start: DEFAULTS.opacityStart,\n      end: DEFAULTS.opacityEnd,\n    },\n    axis = DEFAULTS.ax, // Default axis for slide animations\n  } = config;\n\n  const {\n    start: opacityStart = DEFAULTS.opacityStart,\n    end: opacityEnd = DEFAULTS.opacityEnd,\n  } = opacity;\n\n  const [key, setKey] = useState(0);\n  const elementRef = useRef<T>(null);\n\n  // Memoize the function to get the correct animation class WITH direction\n  const getAnimationClass = useCallback((): string => {\n    switch (type) {\n      case \"fade\":\n        return \"animate-fade\"; // Matches _animations.scss\n      case \"slide\": {\n        const effectiveDistance = distance ?? DEFAULTS.distance;\n        if (axis === \"y\") {\n          return effectiveDistance >= 0\n            ? \"animate-slide-y-positive\"\n            : \"animate-slide-y-negative\";\n        }\n        // Default to X-axis\n        return effectiveDistance >= 0\n          ? \"animate-slide-x-positive\"\n          : \"animate-slide-x-negative\";\n      }\n      case \"scale\":\n        return \"animate-scale\";\n      case \"rotate\": {\n        const effectiveDegrees = degrees ?? DEFAULTS.degrees;\n        return effectiveDegrees >= 0\n          ? \"animate-rotate-positive\"\n          : \"animate-rotate-negative\";\n      }\n      case \"bounce\": {\n        // Using distance sign for bounce direction (positive=up, negative=down)\n        const effectiveDistance = distance ?? DEFAULTS.distance;\n        return effectiveDistance >= 0\n          ? \"animate-bounce-positive\"\n          : \"animate-bounce-negative\";\n      }\n      default:\n        // Help TypeScript ensure all cases are handled\n        const _exhaustiveCheck: never = type;\n        console.warn(`Unknown animation type: ${type}`);\n        return \"\";\n    }\n  }, [type, distance, degrees, axis]);\n\n  // Effect to apply styles and classes\n  useEffect(() => {\n    const element = elementRef.current;\n    if (!element) return;\n\n    const animationClass = getAnimationClass();\n    if (!animationClass) return;\n\n    // --- Clean up previous classes ---\n    const classesToRemove = Array.from(element.classList).filter((cls) =>\n      cls.startsWith(\"animate-\")\n    );\n    if (classesToRemove.length > 0) {\n      element.classList.remove(...classesToRemove);\n    }\n\n    // --- Apply new class ---\n    // Force reflow before adding class might be needed in some edge cases for replay,\n    // but key-based re-render often suffices.\n    // void element.offsetWidth; // Example reflow trigger (use cautiously)\n    element.classList.add(animationClass);\n\n    // --- Set CSS Custom Properties ---\n    // Ensure values are valid numbers before setting\n    element.style.setProperty(\n      \"--animation-duration\",\n      `${validateTime(duration, DEFAULTS.duration)}s`\n    );\n    element.style.setProperty(\n      \"--animation-delay\",\n      `${validateTime(delay, DEFAULTS.delay)}s`\n    );\n    element.style.setProperty(\"--animation-easing\", easing);\n\n    // Type-specific properties - use ABSOLUTE values for magnitude variables\n    if (type === \"fade\") {\n      element.style.setProperty(\n        \"--opacity-start\",\n        validateOpacity(opacityStart).toString()\n      );\n      element.style.setProperty(\n        \"--opacity-end\",\n        validateOpacity(opacityEnd).toString()\n      );\n    }\n\n    if (type === \"slide\" || type === \"bounce\") {\n      const distanceValue =\n        distance !== undefined ? distance : DEFAULTS.distance;\n      // **FIX**: Use absolute value for the CSS variable magnitude\n      element.style.setProperty(\"--distance\", `${Math.abs(distanceValue)}px`);\n    }\n\n    if (type === \"rotate\") {\n      const degreesValue = degrees !== undefined ? degrees : DEFAULTS.degrees;\n      // **FIX**: Use absolute value for the CSS variable magnitude\n      element.style.setProperty(\"--degrees\", `${Math.abs(degreesValue)}deg`);\n    }\n\n    if (type === \"scale\") {\n      const scaleValue = scale !== undefined ? scale : DEFAULTS.scale;\n      element.style.setProperty(\"--scale\", scaleValue.toString());\n    }\n\n    // Cleanup function\n    return () => {\n      if (elementRef.current) {\n        elementRef.current.classList.remove(animationClass);\n      }\n    };\n  }, [\n    key,\n    type,\n    duration,\n    delay,\n    easing,\n    distance,\n    degrees,\n    scale,\n    opacityStart,\n    opacityEnd,\n    getAnimationClass,\n    axis, // Add axis to dependency array\n  ]);\n\n  const replay = useCallback(() => {\n    setKey((prevKey) => prevKey + 1);\n  }, []);\n\n  return { ref: elementRef, key, replay };\n}\n\n// Helper validation functions\n/**\n * Validates if a value is a non-negative number, otherwise returns a default.\n * @param value The value to validate.\n * @param defaultValue The default value to return if validation fails.\n * @returns A valid non-negative number.\n */\nfunction validateTime(value: number | undefined, defaultValue: number): number {\n  return typeof value === \"number\" && value >= 0 ? value : defaultValue;\n}\n\n/**\n * Validates if a value is a number between 0 and 1 (inclusive) for opacity.\n * @param value The value to validate.\n * @returns A valid opacity value (0-1), or a default if invalid.\n */\nfunction validateOpacity(value: number): number {\n  // Ensure opacity is between 0 and 1\n  const numValue = typeof value === \"number\" ? value : NaN;\n  if (isNaN(numValue)) {\n    // Decide a default if value is invalid - depends if it's start or end\n    // Returning 0 here, but could be context-dependent (like DEFAULTS.opacityStart/End)\n    return 0;\n  }\n  return Math.max(0, Math.min(1, numValue));\n}\n","\"use client\";\n\n// src/components/Animate.tsx\nimport React, { forwardRef, HTMLAttributes, JSX, ReactNode } from \"react\";\nimport { useAnimation } from \"@/hooks/useAnimation\";\nimport { AnimationConfig, AnimationType, SlideAxis } from \"@/types/index\";\n\n// Props for the Animate component\ninterface AnimateProps extends HTMLAttributes<HTMLDivElement> {\n  children: ReactNode;\n  type: AnimationType;\n  duration?: number;\n  delay?: number;\n  easing?: string;\n  distance?: number;\n  degrees?: number;\n  scale?: number;\n  opacity?: {\n    start?: number;\n    end?: number;\n  };\n  axis?: SlideAxis; // Add this for slide animation\n  as?: keyof JSX.IntrinsicElements | React.ComponentType<any>;\n  className?: string;\n  onAnimationComplete?: () => void;\n}\n\n/**\n * A wrapper component to easily apply animations using the useAnimation hook.\n * Supports forwarding refs and can render as any HTML element or component.\n *\n * @property {ReactNode} children - The content to animate.\n * @property {AnimationType} type - The type of animation to apply (e.g., \"fade\", \"slide\").\n * @property {number} [duration] - Duration of the animation in seconds.\n * @property {number} [delay] - Delay before the animation starts in seconds.\n * @property {string} [easing] - Easing function for the animation.\n * @property {number} [distance] - Distance for slide or bounce animations.\n * @property {number} [degrees] - Degrees for rotate animations.\n * @property {number} [scale] - Scale factor for scale animations.\n * @property {object} [opacity] - Opacity settings for fade animations (e.g., `{ start: 0, end: 1 }`).\n * @property {SlideAxis} [axis] - Axis for slide animations ('x' or 'y', defaults to 'x').\n * @property {keyof JSX.IntrinsicElements | React.ComponentType<any>} [as] - The HTML element or component to render as.\n * @property {string} [className] - Additional CSS classes to apply.\n * @property {function} [onAnimationComplete] - Callback function when the animation completes.\n *\n * @example\n * <Animate\n *   type=\"fade\"\n *   duration={0.5}\n *   className=\"my-custom-class\"\n * >\n *   <p>Content to animate</p>\n * </Animate>\n */\nexport const Animate = forwardRef<HTMLDivElement, AnimateProps>(\n  (\n    {\n      children,\n      as: Component = \"div\",\n      className = \"\",\n      onAnimationComplete,\n      // Animation config props\n      type,\n      duration,\n      delay,\n      easing,\n      distance,\n      degrees,\n      scale,\n      opacity,\n      axis, // Destructured axis for slide animation\n      ...props\n    },\n    forwardedRef\n  ) => {\n    // Create animation config object from props\n    const animationConfig: AnimationConfig = {\n      type,\n      duration,\n      delay,\n      easing,\n      distance,\n      degrees,\n      scale,\n      opacity,\n      axis, // Pass axis to config\n    };\n\n    // Use the animation hook\n    const { ref, key } = useAnimation<HTMLDivElement>(animationConfig);\n\n    // Combine the refs\n    const setRefs = (element: HTMLDivElement | null) => {\n      // Set the local ref from useAnimation\n      if (typeof ref === \"object\" && ref !== null) {\n        (ref as React.RefObject<HTMLDivElement | null>).current = element;\n      }\n\n      // Set the forwarded ref\n      if (forwardedRef) {\n        if (typeof forwardedRef === \"function\") {\n          forwardedRef(element);\n        } else {\n          (forwardedRef as React.RefObject<HTMLDivElement | null>).current =\n            element;\n        }\n      }\n    };\n\n    // Handle animation end event\n    const handleAnimationEnd = (e: React.AnimationEvent<HTMLDivElement>) => {\n      // Only trigger if it's the main animation ending, not child animations\n      if (e.target === ref.current) {\n        onAnimationComplete?.();\n      }\n\n      // Call the original onAnimationEnd if provided in props\n      props.onAnimationEnd?.(e);\n    };\n\n    // Create combined className\n    const combinedClassName = `animated ${className}`.trim();\n\n    // Use createElement to properly handle the dynamic component type\n    return React.createElement(\n      Component,\n      {\n        ...props,\n        ref: setRefs,\n        className: combinedClassName,\n        key, // Key helps force re-animation\n        onAnimationEnd: handleAnimationEnd,\n        // Add data attributes for potential debugging/testing\n        \"data-animation-type\": type,\n        \"data-animation-duration\": duration ?? 0.5,\n        \"data-animation-delay\": delay ?? 0,\n      },\n      children\n    );\n  }\n);\n\nAnimate.displayName = \"Animate\";\n\nexport default Animate;\n"]}